"use strict";
exports.__esModule = true;
/*
函数类型
为函数定义类型
让我们为上面那个函数添加类型：
*/
function add(x, y) {
    return x + y;
}
var myAdd = function (x, y) {
    return x + y;
};
/*
书写完整函数类型
现在我们已经为函数指定了类型，下面让我们写出函数的完整类型。
*/
var myAdd1 = function (x, y) {
    return x + y;
};
var myAdd2 = function (x, y) {
    return x + y;
};
/*
函数类型包含两部分：参数类型和返回值类型。
当写出完整函数类型的时候，这两部分都是需要的。
我们以参数列表的形式写出参数类型，为每个参数指定一个名字和类型。
这个名字只是为了增加可读性。 我们也可以这么写：


只要参数类型是匹配的，那么就认为它是有效的函数类型，而不在乎参数名是否正确。
第二部分是返回值类型。 对于返回值，我们在函数和返回值类型之前使用( =>)符号，使之清晰明了。
如之前提到的，返回值类型是函数类型的必要部分，如果函数没有返回任何值，你也必须指定返回值类型为 void而不能留空。
函数的类型只是由参数类型和返回值组成的。 函数中使用的捕获变量不会体现在类型里。
实际上，这些变量是函数的隐藏状态并不是组成API的一部分。

*/
var myAdd3 = function (x, y) {
    return x + y;
};
/*
推断类型
尝试这个例子的时候，
你会发现如果你在赋值语句的一边指定了类型但是另一边没有类型的话，
TypeScript编译器会自动识别出类型：
这叫做“按上下文归类”，是类型推论的一种。 它帮助我们更好地为程序指定类型。
*/
// myAdd has the full function type
var myAdd4 = function (x, y) {
    return x + y;
};
// The parameters `x` and `y` have the type number
var myAdd5 = function (x, y) {
    return x + y;
};
/*
可选参数和默认参数
    TypeScript里的每个函数参数都是必须的。
    这不是指不能传递 null或undefined作为参数，
    而是说编译器检查用户是否为每个参数都传入了值。
    编译器还会假设只有这些参数会被传递进函数。
    简短地说，传递给一个函数的参数个数必须与函数期望的参数个数一致。
*/
function buildName(firstName, lastName) {
    return firstName + ' ' + lastName;
}
// let result1 = buildName("Bob");                  // error, too few parameters
// let result2 = buildName("Bob", "Adams", "Sr.");  // error, too many parameters
var result3 = buildName('Bob', 'Adams'); // ah, just right
/*
JavaScript里，每个参数都是可选的，可传可不传。
    没传参的时候，它的值就是undefined。
    在TypeScript里我们可以在参数名旁使用 ?实现可选参数的功能。
    比如，我们想让last name是可选的：
*/
function buildName1(firstName, lastName) {
    if (lastName)
        return firstName + ' ' + lastName;
    else
        return firstName;
}
var result1_1 = buildName1('Bob'); // works correctly now
// let result2_1 = buildName1("Bob", "Adams", "Sr.");  // error, too many parameters
var result3_1 = buildName1('Bob', 'Adams'); // ah, just right
/*

可选参数必须跟在必须参数后面。
如果上例我们想让first name是可选的，那么就必须调整它们的位置，把first name放在后面。
在TypeScript里，我们也可以为参数提供一个默认值当用户没有传递这个参数或传递的值是undefined时。
它们叫做有默认初始化值的参数。 让我们修改上例，把last name的默认值设置为"Smith"。
*/
function buildName2(firstName, lastName) {
    if (lastName === void 0) { lastName = 'Smith'; }
    return firstName + ' ' + lastName;
}
var result1_2 = buildName2('Bob'); // works correctly now, returns "Bob Smith"
var result2_2 = buildName2('Bob', undefined); // still works, also returns "Bob Smith"
// let result3_2 = buildName2('Bob', 'Adams', 'Sr.'); // error, too many parameters
var result4_2 = buildName2('Bob', 'Adams'); // ah, just right
console.log('result2_2=', result2_2);
/*
在所有必须参数后面的带默认初始化的参数都是可选的，
与可选参数一样，在调用函数的时候可以省略。
也就是说可选参数与末尾的默认参数共享参数类型。
*/
function buildName3(firstName, lastName) {
    // ...
}
/*
共享同样的类型(firstName: string, lastName?: string) => string。
默认参数的默认值消失了，只保留了它是一个可选参数的信息。

与普通可选参数不同的是，
带默认值的参数不需要放在必须参数的后面。
如果带默认值的参数出现在必须参数前面，用户必须明确的传入 undefined值来获得默认值。
例如，我们重写最后一个例子，让 firstName是带默认值的参数：
*/
/*
剩余参数
必要参数，默认参数和可选参数有个共同点：它们表示某一个参数。
有时，你想同时操作多个参数，或者你并不知道会有多少参数传递进来。
在JavaScript里，你可以使用 arguments来访问所有传入的参数。
在TypeScript里，你可以把所有参数收集到一个变量里：



剩余参数会被当做个数不限的可选参数。 可以一个都没有，同样也可以有任意个。
编译器创建参数数组，名字是你在省略号（ ...）后面给定的名字，你可以在函数体内使用这个数组。
这个省略号也会在带有剩余参数的函数类型定义上使用到：
*/
function buildName4(firstName) {
    var restOfName = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        restOfName[_i - 1] = arguments[_i];
    }
    return firstName + ' ' + restOfName.join(' ');
}
var employeeName = buildName4('Joseph', 'Samuel', 'Lucas', 'MacKinzie');
// restOfName 数组类型
function buildName5(firstName) {
    var restOfName = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        restOfName[_i - 1] = arguments[_i];
    }
    return firstName + ' ' + restOfName.join(' ');
}
var buildNameFun = buildName5;
/*
this和箭头函数
JavaScript里，this的值在函数被调用的时候才会指定。
这是个既强大又灵活的特点，但是你需要花点时间弄清楚函数调用的上下文是什么。
但众所周知，这不是一件很简单的事，尤其是在返回一个函数或将函数当做参数传递的时候。
下面看一个例子：
*/
// let deck = {
//     suits: ['hearts', 'spades', 'clubs', 'diamonds'],
//     cards: Array(52),
//     createCardPicker: function () {
//         return function () {
//             let pickedCard = Math.floor(Math.random() * 52);
//             let pickedSuit = Math.floor(pickedCard / 13);
//             return { suit: this.suits[pickedSuit], card: pickedCard % 13 };
//         };
//     },
// };
// let cardPicker = deck.createCardPicker();
// let pickedCard = cardPicker();
// console.log('card: ' + pickedCard.card + ' of ' + pickedCard.suit);
/*
可以看到createCardPicker是个函数，并且它又返回了一个函数。
如果我们尝试运行这个程序，会发现它并没有弹出对话框而是报错了。
因为 createCardPicker返回的函数里的this被设置成了window而不是deck对象。
因为我们只是独立的调用了 cardPicker()。
顶级的非方法式调用会将 this视为window。
（注意：在严格模式下， this为undefined而不是window）。

为了解决这个问题，我们可以在函数被返回时就绑好正确的this。
这样的话，无论之后怎么使用它，都会引用绑定的‘deck’对象。
我们需要改变函数表达式来使用ECMAScript 6箭头语法。
箭头函数能保存函数创建时的 this值，而不是调用时的值：
*/
var deck1 = {
    suits: ["hearts", "spades", "clubs", "diamonds"],
    cards: Array(52),
    createCardPicker: function () {
        var _this = this;
        // NOTE: the line below is now an arrow function, allowing us to capture 'this' right here
        return function () {
            var pickedCard = Math.floor(Math.random() * 52);
            var pickedSuit = Math.floor(pickedCard / 13);
            console.log('pickedSuit=', pickedSuit);
            console.log('pickedCard=', pickedCard);
            return { suit: _this.suits[pickedSuit], card: pickedCard % 13 };
        };
    }
};
var cardPicker1 = deck1.createCardPicker();
var pickedCard1 = cardPicker1();
console.log("card: " + pickedCard1.card + " of " + pickedCard1.suit);
/*
this参数
不幸的是，this.suits[pickedSuit]的类型依旧为any。
这是因为 this来自对象字面量里的函数表达式。
修改的方法是，提供一个显式的 this参数。
this参数是个假的参数，它出现在参数列表的最前面：

*/
function f() {
    // make sure `this` is unusable in this standalone function
}
var deck2 = {
    suits: ["hearts", "spades", "clubs", "diamonds"],
    cards: Array(52),
    // NOTE: The function now explicitly specifies that its callee must be of type Deck
    createCardPicker: function () {
        var _this = this;
        return function () {
            var pickedCard = Math.floor(Math.random() * 52);
            var pickedSuit = Math.floor(pickedCard / 13);
            console.log('pickedSuit=', pickedSuit);
            console.log('pickedCard=', pickedCard);
            return { suit: _this.suits[pickedSuit], card: pickedCard % 13 };
        };
    }
};
var cardPicker2 = deck2.createCardPicker();
var pickedCard2 = cardPicker2();
console.log("card: " + pickedCard2.card + " of " + pickedCard2.suit);
var Handler = /** @class */ (function () {
    function Handler() {
    }
    Handler.prototype.onClickBad = function (e) {
        // oops, used this here. using this callback would crash at runtime
        // this.info = e.message;
    };
    return Handler;
}());
var h = new Handler();
var uiElement = document.getElementById('id');
uiElement.addEventListener('click', h.onClickBad); // error!
/*
重载
    JavaScript本身是个动态语言。
    JavaScript里函数根据传入不同的参数而返回不同类型的数据是很常见的。
*/
var suits = ["hearts", "spades", "clubs", "diamonds"];
function pickCard(x) {
    // Check to see if we're working with an object/array
    // if so, they gave us the deck and we'll pick the card
    if (typeof x == "object") {
        var pickedCard = Math.floor(Math.random() * x.length);
        return pickedCard;
    }
    // Otherwise just let them pick the card
    else if (typeof x == "number") {
        var pickedSuit = Math.floor(x / 13);
        return { suit: suits[pickedSuit], card: x % 13 };
    }
}
var myDeck = [{ suit: "diamonds", card: 2 }, { suit: "spades", card: 10 }, { suit: "hearts", card: 4 }];
var pickedCard3 = myDeck[pickCard(myDeck)];
console.log("card: " + pickedCard3.card + " of " + pickedCard3.suit);
var pickedCard4 = pickCard(15);
console.log("card: " + pickedCard4.card + " of " + pickedCard4.suit);
/*
pickCard方法根据传入参数的不同会返回两种不同的类型。
如果传入的是代表纸牌的对象，函数作用是从中抓一张牌。
如果用户想抓牌，我们告诉他抓到了什么牌。
但是这怎么在类型系统里表示呢。

方法是为同一个函数提供多个函数类型定义来进行函数重载。
编译器会根据这个列表去处理函数的调用。
下面我们来重载 pickCard函数。
*/
var suits2 = ["hearts", "spades", "clubs", "diamonds"];
function pickCard2(x) {
    return 1;
}
;
function pickCard3(x) { }
;
function pickCard4(x) {
    // Check to see if we're working with an object/array
    // if so, they gave us the deck and we'll pick the card
    if (typeof x == "object") {
        var pickedCard = Math.floor(Math.random() * x.length);
        return pickedCard;
    }
    // Otherwise just let them pick the card
    else if (typeof x == "number") {
        var pickedSuit = Math.floor(x / 13);
        return { suit: suits[pickedSuit], card: x % 13 };
    }
}
var myDeck4 = [{ suit: "diamonds", card: 2 }, { suit: "spades", card: 10 }, { suit: "hearts", card: 4 }];
var pickedCard5 = myDeck[pickCard(myDeck)];
alert("card: " + pickedCard1.card + " of " + pickedCard1.suit);
var pickedCard6 = pickCard(15);
alert("card: " + pickedCard2.card + " of " + pickedCard2.suit);
exports["default"] = {};

//# sourceMappingURL=data:application/json;charset=utf8;base64,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57G75Z6LXG7kuLrlh73mlbDlrprkuYnnsbvlnotcbuiuqeaIkeS7rOS4uuS4iumdoumCo+S4quWHveaVsOa3u+WKoOexu+Wei++8mlxuKi9cbmZ1bmN0aW9uIGFkZCh4OiBudW1iZXIsIHk6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHggKyB5O1xufVxuXG5sZXQgbXlBZGQgPSBmdW5jdGlvbiAoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB4ICsgeTtcbn07XG5cbi8qXG7kuablhpnlrozmlbTlh73mlbDnsbvlnotcbueOsOWcqOaIkeS7rOW3sue7j+S4uuWHveaVsOaMh+WumuS6huexu+Wei++8jOS4i+mdouiuqeaIkeS7rOWGmeWHuuWHveaVsOeahOWujOaVtOexu+Wei+OAglxuKi9cblxubGV0IG15QWRkMTogKHg6IG51bWJlciwgeTogbnVtYmVyKSA9PiBudW1iZXIgPSBmdW5jdGlvbiAoXG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlclxuKTogbnVtYmVyIHtcbiAgICByZXR1cm4geCArIHk7XG59O1xuXG5sZXQgbXlBZGQyOiAoeDogbnVtYmVyLCB5OiBudW1iZXIpID0+IG51bWJlciA9IChcbiAgICB4OiBudW1iZXIsXG4gICAgeTogbnVtYmVyXG4pOiBudW1iZXIgPT4ge1xuICAgIHJldHVybiB4ICsgeTtcbn07XG5cbi8qXG7lh73mlbDnsbvlnovljIXlkKvkuKTpg6jliIbvvJrlj4LmlbDnsbvlnovlkozov5Tlm57lgLznsbvlnovjgIJcbuW9k+WGmeWHuuWujOaVtOWHveaVsOexu+Wei+eahOaXtuWAme+8jOi/meS4pOmDqOWIhumDveaYr+mcgOimgeeahOOAglxu5oiR5Lus5Lul5Y+C5pWw5YiX6KGo55qE5b2i5byP5YaZ5Ye65Y+C5pWw57G75Z6L77yM5Li65q+P5Liq5Y+C5pWw5oyH5a6a5LiA5Liq5ZCN5a2X5ZKM57G75Z6L44CCXG7ov5nkuKrlkI3lrZflj6rmmK/kuLrkuoblop7liqDlj6/or7vmgKfjgIIg5oiR5Lus5Lmf5Y+v5Lul6L+Z5LmI5YaZ77yaXG5cblxu5Y+q6KaB5Y+C5pWw57G75Z6L5piv5Yy56YWN55qE77yM6YKj5LmI5bCx6K6k5Li65a6D5piv5pyJ5pWI55qE5Ye95pWw57G75Z6L77yM6ICM5LiN5Zyo5LmO5Y+C5pWw5ZCN5piv5ZCm5q2j56Gu44CCXG7nrKzkuozpg6jliIbmmK/ov5Tlm57lgLznsbvlnovjgIIg5a+55LqO6L+U5Zue5YC877yM5oiR5Lus5Zyo5Ye95pWw5ZKM6L+U5Zue5YC857G75Z6L5LmL5YmN5L2/55SoKCA9PinnrKblj7fvvIzkvb/kuYvmuIXmmbDmmI7kuobjgIIgXG7lpoLkuYvliY3mj5DliLDnmoTvvIzov5Tlm57lgLznsbvlnovmmK/lh73mlbDnsbvlnovnmoTlv4XopoHpg6jliIbvvIzlpoLmnpzlh73mlbDmsqHmnInov5Tlm57ku7vkvZXlgLzvvIzkvaDkuZ/lv4XpobvmjIflrprov5Tlm57lgLznsbvlnovkuLogdm9pZOiAjOS4jeiDveeVmeepuuOAglxu5Ye95pWw55qE57G75Z6L5Y+q5piv55Sx5Y+C5pWw57G75Z6L5ZKM6L+U5Zue5YC857uE5oiQ55qE44CCIOWHveaVsOS4reS9v+eUqOeahOaNleiOt+WPmOmHj+S4jeS8muS9k+eOsOWcqOexu+Wei+mHjOOAglxu5a6e6ZmF5LiK77yM6L+Z5Lqb5Y+Y6YeP5piv5Ye95pWw55qE6ZqQ6JeP54q25oCB5bm25LiN5piv57uE5oiQQVBJ55qE5LiA6YOo5YiG44CCXG5cbiovXG5cbmxldCBteUFkZDM6IChiYXNlVmFsdWU6IG51bWJlciwgaW5jcmVtZW50OiBudW1iZXIpID0+IG51bWJlciA9IGZ1bmN0aW9uIChcbiAgICB4OiBudW1iZXIsXG4gICAgeTogbnVtYmVyXG4pOiBudW1iZXIge1xuICAgIHJldHVybiB4ICsgeTtcbn07XG5cbi8qXG7mjqjmlq3nsbvlnotcbuWwneivlei/meS4quS+i+WtkOeahOaXtuWAme+8jFxu5L2g5Lya5Y+R546w5aaC5p6c5L2g5Zyo6LWL5YC86K+t5Y+l55qE5LiA6L655oyH5a6a5LqG57G75Z6L5L2G5piv5Y+m5LiA6L655rKh5pyJ57G75Z6L55qE6K+d77yMXG5UeXBlU2NyaXB057yW6K+R5Zmo5Lya6Ieq5Yqo6K+G5Yir5Ye657G75Z6L77yaXG7ov5nlj6vlgZrigJzmjInkuIrkuIvmloflvZLnsbvigJ3vvIzmmK/nsbvlnovmjqjorrrnmoTkuIDnp43jgIIg5a6D5biu5Yqp5oiR5Lus5pu05aW95Zyw5Li656iL5bqP5oyH5a6a57G75Z6L44CCXG4qL1xuXG4vLyBteUFkZCBoYXMgdGhlIGZ1bGwgZnVuY3Rpb24gdHlwZVxubGV0IG15QWRkNCA9IGZ1bmN0aW9uICh4OiBudW1iZXIsIHk6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHggKyB5O1xufTtcblxuLy8gVGhlIHBhcmFtZXRlcnMgYHhgIGFuZCBgeWAgaGF2ZSB0aGUgdHlwZSBudW1iZXJcbmxldCBteUFkZDU6IChiYXNlVmFsdWU6IG51bWJlciwgaW5jcmVtZW50OiBudW1iZXIpID0+IG51bWJlciA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgcmV0dXJuIHggKyB5O1xufTtcblxuLypcbuWPr+mAieWPguaVsOWSjOm7mOiupOWPguaVsFxuICAgIFR5cGVTY3JpcHTph4znmoTmr4/kuKrlh73mlbDlj4LmlbDpg73mmK/lv4XpobvnmoTjgIJcbiAgICDov5nkuI3mmK/mjIfkuI3og73kvKDpgJIgbnVsbOaIlnVuZGVmaW5lZOS9nOS4uuWPguaVsO+8jFxuICAgIOiAjOaYr+ivtOe8luivkeWZqOajgOafpeeUqOaIt+aYr+WQpuS4uuavj+S4quWPguaVsOmDveS8oOWFpeS6huWAvOOAgiBcbiAgICDnvJbor5Hlmajov5jkvJrlgYforr7lj6rmnInov5nkupvlj4LmlbDkvJrooqvkvKDpgJLov5vlh73mlbDjgIIgXG4gICAg566A55+t5Zyw6K+077yM5Lyg6YCS57uZ5LiA5Liq5Ye95pWw55qE5Y+C5pWw5Liq5pWw5b+F6aG75LiO5Ye95pWw5pyf5pyb55qE5Y+C5pWw5Liq5pWw5LiA6Ie044CCXG4qL1xuXG5mdW5jdGlvbiBidWlsZE5hbWUoZmlyc3ROYW1lOiBzdHJpbmcsIGxhc3ROYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gZmlyc3ROYW1lICsgJyAnICsgbGFzdE5hbWU7XG59XG5cbi8vIGxldCByZXN1bHQxID0gYnVpbGROYW1lKFwiQm9iXCIpOyAgICAgICAgICAgICAgICAgIC8vIGVycm9yLCB0b28gZmV3IHBhcmFtZXRlcnNcbi8vIGxldCByZXN1bHQyID0gYnVpbGROYW1lKFwiQm9iXCIsIFwiQWRhbXNcIiwgXCJTci5cIik7ICAvLyBlcnJvciwgdG9vIG1hbnkgcGFyYW1ldGVyc1xubGV0IHJlc3VsdDMgPSBidWlsZE5hbWUoJ0JvYicsICdBZGFtcycpOyAvLyBhaCwganVzdCByaWdodFxuXG4vKlxuSmF2YVNjcmlwdOmHjO+8jOavj+S4quWPguaVsOmDveaYr+WPr+mAieeahO+8jOWPr+S8oOWPr+S4jeS8oOOAglxuICAgIOayoeS8oOWPgueahOaXtuWAme+8jOWug+eahOWAvOWwseaYr3VuZGVmaW5lZOOAglxuICAgIOWcqFR5cGVTY3JpcHTph4zmiJHku6zlj6/ku6XlnKjlj4LmlbDlkI3ml4Hkvb/nlKggP+WunueOsOWPr+mAieWPguaVsOeahOWKn+iDveOAglxuICAgIOavlOWmgu+8jOaIkeS7rOaDs+iuqWxhc3QgbmFtZeaYr+WPr+mAieeahO+8mlxuKi9cblxuZnVuY3Rpb24gYnVpbGROYW1lMShmaXJzdE5hbWU6IHN0cmluZywgbGFzdE5hbWU/OiBzdHJpbmcpIHtcbiAgICBpZiAobGFzdE5hbWUpIHJldHVybiBmaXJzdE5hbWUgKyAnICcgKyBsYXN0TmFtZTtcbiAgICBlbHNlIHJldHVybiBmaXJzdE5hbWU7XG59XG5cbmxldCByZXN1bHQxXzEgPSBidWlsZE5hbWUxKCdCb2InKTsgLy8gd29ya3MgY29ycmVjdGx5IG5vd1xuLy8gbGV0IHJlc3VsdDJfMSA9IGJ1aWxkTmFtZTEoXCJCb2JcIiwgXCJBZGFtc1wiLCBcIlNyLlwiKTsgIC8vIGVycm9yLCB0b28gbWFueSBwYXJhbWV0ZXJzXG5sZXQgcmVzdWx0M18xID0gYnVpbGROYW1lMSgnQm9iJywgJ0FkYW1zJyk7IC8vIGFoLCBqdXN0IHJpZ2h0XG5cbi8qXG5cbuWPr+mAieWPguaVsOW/hemhu+i3n+WcqOW/hemhu+WPguaVsOWQjumdouOAgiBcbuWmguaenOS4iuS+i+aIkeS7rOaDs+iuqWZpcnN0IG5hbWXmmK/lj6/pgInnmoTvvIzpgqPkuYjlsLHlv4XpobvosIPmlbTlroPku6znmoTkvY3nva7vvIzmiopmaXJzdCBuYW1l5pS+5Zyo5ZCO6Z2i44CCXG7lnKhUeXBlU2NyaXB06YeM77yM5oiR5Lus5Lmf5Y+v5Lul5Li65Y+C5pWw5o+Q5L6b5LiA5Liq6buY6K6k5YC85b2T55So5oi35rKh5pyJ5Lyg6YCS6L+Z5Liq5Y+C5pWw5oiW5Lyg6YCS55qE5YC85pivdW5kZWZpbmVk5pe244CCXG7lroPku6zlj6vlgZrmnInpu5jorqTliJ3lp4vljJblgLznmoTlj4LmlbDjgIIg6K6p5oiR5Lus5L+u5pS55LiK5L6L77yM5oqKbGFzdCBuYW1l55qE6buY6K6k5YC86K6+572u5Li6XCJTbWl0aFwi44CCXG4qL1xuXG5mdW5jdGlvbiBidWlsZE5hbWUyKGZpcnN0TmFtZTogc3RyaW5nLCBsYXN0TmFtZSA9ICdTbWl0aCcpIHtcbiAgICByZXR1cm4gZmlyc3ROYW1lICsgJyAnICsgbGFzdE5hbWU7XG59XG5cbmxldCByZXN1bHQxXzIgPSBidWlsZE5hbWUyKCdCb2InKTsgLy8gd29ya3MgY29ycmVjdGx5IG5vdywgcmV0dXJucyBcIkJvYiBTbWl0aFwiXG5sZXQgcmVzdWx0Ml8yID0gYnVpbGROYW1lMignQm9iJywgdW5kZWZpbmVkKTsgLy8gc3RpbGwgd29ya3MsIGFsc28gcmV0dXJucyBcIkJvYiBTbWl0aFwiXG4vLyBsZXQgcmVzdWx0M18yID0gYnVpbGROYW1lMignQm9iJywgJ0FkYW1zJywgJ1NyLicpOyAvLyBlcnJvciwgdG9vIG1hbnkgcGFyYW1ldGVyc1xubGV0IHJlc3VsdDRfMiA9IGJ1aWxkTmFtZTIoJ0JvYicsICdBZGFtcycpOyAvLyBhaCwganVzdCByaWdodFxuXG5jb25zb2xlLmxvZygncmVzdWx0Ml8yPScsIHJlc3VsdDJfMik7XG5cbi8qXG7lnKjmiYDmnInlv4Xpobvlj4LmlbDlkI7pnaLnmoTluKbpu5jorqTliJ3lp4vljJbnmoTlj4LmlbDpg73mmK/lj6/pgInnmoTvvIxcbuS4juWPr+mAieWPguaVsOS4gOagt++8jOWcqOiwg+eUqOWHveaVsOeahOaXtuWAmeWPr+S7peecgeeVpeOAgiBcbuS5n+WwseaYr+ivtOWPr+mAieWPguaVsOS4juacq+WwvueahOm7mOiupOWPguaVsOWFseS6q+WPguaVsOexu+Wei+OAglxuKi9cblxuZnVuY3Rpb24gYnVpbGROYW1lMyhmaXJzdE5hbWU6IHN0cmluZywgbGFzdE5hbWU/OiBzdHJpbmcpIHtcbiAgICAvLyAuLi5cbn1cblxuLypcbuWFseS6q+WQjOagt+eahOexu+WeiyhmaXJzdE5hbWU6IHN0cmluZywgbGFzdE5hbWU/OiBzdHJpbmcpID0+IHN0cmluZ+OAglxu6buY6K6k5Y+C5pWw55qE6buY6K6k5YC85raI5aSx5LqG77yM5Y+q5L+d55WZ5LqG5a6D5piv5LiA5Liq5Y+v6YCJ5Y+C5pWw55qE5L+h5oGv44CCXG5cbuS4juaZrumAmuWPr+mAieWPguaVsOS4jeWQjOeahOaYr++8jFxu5bim6buY6K6k5YC855qE5Y+C5pWw5LiN6ZyA6KaB5pS+5Zyo5b+F6aG75Y+C5pWw55qE5ZCO6Z2i44CCXG7lpoLmnpzluKbpu5jorqTlgLznmoTlj4LmlbDlh7rnjrDlnKjlv4Xpobvlj4LmlbDliY3pnaLvvIznlKjmiLflv4XpobvmmI7noa7nmoTkvKDlhaUgdW5kZWZpbmVk5YC85p2l6I635b6X6buY6K6k5YC844CCXG7kvovlpoLvvIzmiJHku6zph43lhpnmnIDlkI7kuIDkuKrkvovlrZDvvIzorqkgZmlyc3ROYW1l5piv5bim6buY6K6k5YC855qE5Y+C5pWw77yaXG4qL1xuXG4vKlxu5Ymp5L2Z5Y+C5pWwXG7lv4XopoHlj4LmlbDvvIzpu5jorqTlj4LmlbDlkozlj6/pgInlj4LmlbDmnInkuKrlhbHlkIzngrnvvJrlroPku6zooajnpLrmn5DkuIDkuKrlj4LmlbDjgIJcbuacieaXtu+8jOS9oOaDs+WQjOaXtuaTjeS9nOWkmuS4quWPguaVsO+8jOaIluiAheS9oOW5tuS4jeefpemBk+S8muacieWkmuWwkeWPguaVsOS8oOmAkui/m+adpeOAglxu5ZyoSmF2YVNjcmlwdOmHjO+8jOS9oOWPr+S7peS9v+eUqCBhcmd1bWVudHPmnaXorr/pl67miYDmnInkvKDlhaXnmoTlj4LmlbDjgIJcbuWcqFR5cGVTY3JpcHTph4zvvIzkvaDlj6/ku6XmiormiYDmnInlj4LmlbDmlLbpm4bliLDkuIDkuKrlj5jph4/ph4zvvJpcblxuXG5cbuWJqeS9meWPguaVsOS8muiiq+W9k+WBmuS4quaVsOS4jemZkOeahOWPr+mAieWPguaVsOOAgiDlj6/ku6XkuIDkuKrpg73msqHmnInvvIzlkIzmoLfkuZ/lj6/ku6XmnInku7vmhI/kuKrjgIJcbue8luivkeWZqOWIm+W7uuWPguaVsOaVsOe7hO+8jOWQjeWtl+aYr+S9oOWcqOecgeeVpeWPt++8iCAuLi7vvInlkI7pnaLnu5nlrprnmoTlkI3lrZfvvIzkvaDlj6/ku6XlnKjlh73mlbDkvZPlhoXkvb/nlKjov5nkuKrmlbDnu4TjgIJcbui/meS4quecgeeVpeWPt+S5n+S8muWcqOW4puacieWJqeS9meWPguaVsOeahOWHveaVsOexu+Wei+WumuS5ieS4iuS9v+eUqOWIsO+8mlxuKi9cblxuZnVuY3Rpb24gYnVpbGROYW1lNChmaXJzdE5hbWU6IHN0cmluZywgLi4ucmVzdE9mTmFtZTogc3RyaW5nW10pIHtcbiAgICByZXR1cm4gZmlyc3ROYW1lICsgJyAnICsgcmVzdE9mTmFtZS5qb2luKCcgJyk7XG59XG5cbmxldCBlbXBsb3llZU5hbWUgPSBidWlsZE5hbWU0KCdKb3NlcGgnLCAnU2FtdWVsJywgJ0x1Y2FzJywgJ01hY0tpbnppZScpO1xuLy8gcmVzdE9mTmFtZSDmlbDnu4TnsbvlnotcbmZ1bmN0aW9uIGJ1aWxkTmFtZTUoZmlyc3ROYW1lOiBzdHJpbmcsIC4uLnJlc3RPZk5hbWU6IHN0cmluZ1tdKSB7XG4gICAgcmV0dXJuIGZpcnN0TmFtZSArICcgJyArIHJlc3RPZk5hbWUuam9pbignICcpO1xufVxuXG5sZXQgYnVpbGROYW1lRnVuOiAoZm5hbWU6IHN0cmluZywgLi4ucmVzdDogc3RyaW5nW10pID0+IHN0cmluZyA9IGJ1aWxkTmFtZTU7XG5cbi8qXG50aGlz5ZKM566t5aS05Ye95pWwXG5KYXZhU2NyaXB06YeM77yMdGhpc+eahOWAvOWcqOWHveaVsOiiq+iwg+eUqOeahOaXtuWAmeaJjeS8muaMh+WumuOAglxu6L+Z5piv5Liq5pei5by65aSn5Y+I54G15rS755qE54m554K577yM5L2G5piv5L2g6ZyA6KaB6Iqx54K55pe26Ze05byE5riF5qWa5Ye95pWw6LCD55So55qE5LiK5LiL5paH5piv5LuA5LmI44CCXG7kvYbkvJfmiYDlkajnn6XvvIzov5nkuI3mmK/kuIDku7blvojnroDljZXnmoTkuovvvIzlsKTlhbbmmK/lnKjov5Tlm57kuIDkuKrlh73mlbDmiJblsIblh73mlbDlvZPlgZrlj4LmlbDkvKDpgJLnmoTml7blgJnjgIJcbuS4i+mdoueci+S4gOS4quS+i+WtkO+8mlxuKi9cblxuLy8gbGV0IGRlY2sgPSB7XG4vLyAgICAgc3VpdHM6IFsnaGVhcnRzJywgJ3NwYWRlcycsICdjbHVicycsICdkaWFtb25kcyddLFxuLy8gICAgIGNhcmRzOiBBcnJheSg1MiksXG4vLyAgICAgY3JlYXRlQ2FyZFBpY2tlcjogZnVuY3Rpb24gKCkge1xuLy8gICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuLy8gICAgICAgICAgICAgbGV0IHBpY2tlZENhcmQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1Mik7XG4vLyAgICAgICAgICAgICBsZXQgcGlja2VkU3VpdCA9IE1hdGguZmxvb3IocGlja2VkQ2FyZCAvIDEzKTtcblxuLy8gICAgICAgICAgICAgcmV0dXJuIHsgc3VpdDogdGhpcy5zdWl0c1twaWNrZWRTdWl0XSwgY2FyZDogcGlja2VkQ2FyZCAlIDEzIH07XG4vLyAgICAgICAgIH07XG4vLyAgICAgfSxcbi8vIH07XG5cbi8vIGxldCBjYXJkUGlja2VyID0gZGVjay5jcmVhdGVDYXJkUGlja2VyKCk7XG4vLyBsZXQgcGlja2VkQ2FyZCA9IGNhcmRQaWNrZXIoKTtcblxuLy8gY29uc29sZS5sb2coJ2NhcmQ6ICcgKyBwaWNrZWRDYXJkLmNhcmQgKyAnIG9mICcgKyBwaWNrZWRDYXJkLnN1aXQpO1xuXG4vKlxu5Y+v5Lul55yL5YiwY3JlYXRlQ2FyZFBpY2tlcuaYr+S4quWHveaVsO+8jOW5tuS4lOWug+WPiOi/lOWbnuS6huS4gOS4quWHveaVsOOAglxu5aaC5p6c5oiR5Lus5bCd6K+V6L+Q6KGM6L+Z5Liq56iL5bqP77yM5Lya5Y+R546w5a6D5bm25rKh5pyJ5by55Ye65a+56K+d5qGG6ICM5piv5oql6ZSZ5LqG44CCXG7lm6DkuLogY3JlYXRlQ2FyZFBpY2tlcui/lOWbnueahOWHveaVsOmHjOeahHRoaXPooqvorr7nva7miJDkuoZ3aW5kb3fogIzkuI3mmK9kZWNr5a+56LGh44CCXG7lm6DkuLrmiJHku6zlj6rmmK/ni6znq4vnmoTosIPnlKjkuoYgY2FyZFBpY2tlcigp44CCIFxu6aG257qn55qE6Z2e5pa55rOV5byP6LCD55So5Lya5bCGIHRoaXPop4bkuLp3aW5kb3fjgIIgXG7vvIjms6jmhI/vvJrlnKjkuKXmoLzmqKHlvI/kuIvvvIwgdGhpc+S4unVuZGVmaW5lZOiAjOS4jeaYr3dpbmRvd++8ieOAglxuXG7kuLrkuobop6PlhrPov5nkuKrpl67popjvvIzmiJHku6zlj6/ku6XlnKjlh73mlbDooqvov5Tlm57ml7blsLHnu5Hlpb3mraPnoa7nmoR0aGlz44CCXG7ov5nmoLfnmoTor53vvIzml6DorrrkuYvlkI7mgI7kuYjkvb/nlKjlroPvvIzpg73kvJrlvJXnlKjnu5HlrprnmoTigJhkZWNr4oCZ5a+56LGh44CCXG7miJHku6zpnIDopoHmlLnlj5jlh73mlbDooajovr7lvI/mnaXkvb/nlKhFQ01BU2NyaXB0IDbnrq3lpLTor63ms5XjgIJcbueureWktOWHveaVsOiDveS/neWtmOWHveaVsOWIm+W7uuaXtueahCB0aGlz5YC877yM6ICM5LiN5piv6LCD55So5pe255qE5YC877yaXG4qL1xuXG5sZXQgZGVjazEgPSB7XG4gICAgc3VpdHM6IFtcImhlYXJ0c1wiLCBcInNwYWRlc1wiLCBcImNsdWJzXCIsIFwiZGlhbW9uZHNcIl0sXG4gICAgY2FyZHM6IEFycmF5KDUyKSxcbiAgICBjcmVhdGVDYXJkUGlja2VyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gTk9URTogdGhlIGxpbmUgYmVsb3cgaXMgbm93IGFuIGFycm93IGZ1bmN0aW9uLCBhbGxvd2luZyB1cyB0byBjYXB0dXJlICd0aGlzJyByaWdodCBoZXJlXG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgcGlja2VkQ2FyZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDUyKTtcbiAgICAgICAgICAgIGxldCBwaWNrZWRTdWl0ID0gTWF0aC5mbG9vcihwaWNrZWRDYXJkIC8gMTMpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3BpY2tlZFN1aXQ9JyxwaWNrZWRTdWl0KSAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZygncGlja2VkQ2FyZD0nLHBpY2tlZENhcmQpICBcbiAgICAgICAgICAgIHJldHVybiB7c3VpdDogdGhpcy5zdWl0c1twaWNrZWRTdWl0XSwgY2FyZDogcGlja2VkQ2FyZCAlIDEzfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxubGV0IGNhcmRQaWNrZXIxID0gZGVjazEuY3JlYXRlQ2FyZFBpY2tlcigpO1xubGV0IHBpY2tlZENhcmQxPSBjYXJkUGlja2VyMSgpO1xuXG5jb25zb2xlLmxvZyhcImNhcmQ6IFwiICsgcGlja2VkQ2FyZDEuY2FyZCArIFwiIG9mIFwiICsgcGlja2VkQ2FyZDEuc3VpdCk7XG5cbi8qXG50aGlz5Y+C5pWwXG7kuI3lubjnmoTmmK/vvIx0aGlzLnN1aXRzW3BpY2tlZFN1aXRd55qE57G75Z6L5L6d5pen5Li6YW5544CCXG7ov5nmmK/lm6DkuLogdGhpc+adpeiHquWvueixoeWtl+mdoumHj+mHjOeahOWHveaVsOihqOi+vuW8j+OAgiBcbuS/ruaUueeahOaWueazleaYr++8jOaPkOS+m+S4gOS4quaYvuW8j+eahCB0aGlz5Y+C5pWw44CCXG50aGlz5Y+C5pWw5piv5Liq5YGH55qE5Y+C5pWw77yM5a6D5Ye6546w5Zyo5Y+C5pWw5YiX6KGo55qE5pyA5YmN6Z2i77yaXG5cbiovXG5mdW5jdGlvbiBmKHRoaXM6IHZvaWQpIHtcbiAgICAvLyBtYWtlIHN1cmUgYHRoaXNgIGlzIHVudXNhYmxlIGluIHRoaXMgc3RhbmRhbG9uZSBmdW5jdGlvblxufVxuXG4vL+iuqeaIkeS7rOW+gOS+i+WtkOmHjOa3u+WKoOS4gOS6m+aOpeWPo++8jENhcmQg5ZKMIERlY2vvvIzorqnnsbvlnovph43nlKjog73lpJ/lj5jlvpfmuIXmmbDnroDljZXkupvvvJpcbmludGVyZmFjZSBDYXJkMiB7XG4gICAgc3VpdDogc3RyaW5nO1xuICAgIGNhcmQ6IG51bWJlcjtcbn1cbmludGVyZmFjZSBEZWNrMiB7XG4gICAgc3VpdHM6IHN0cmluZ1tdO1xuICAgIGNhcmRzOiBudW1iZXJbXTtcbiAgICBjcmVhdGVDYXJkUGlja2VyKHRoaXM6IERlY2syKTogKCkgPT4gQ2FyZDI7XG59XG5sZXQgZGVjazI6IERlY2syID0ge1xuICAgIHN1aXRzOiBbXCJoZWFydHNcIiwgXCJzcGFkZXNcIiwgXCJjbHVic1wiLCBcImRpYW1vbmRzXCJdLFxuICAgIGNhcmRzOiBBcnJheSg1MiksXG4gICAgLy8gTk9URTogVGhlIGZ1bmN0aW9uIG5vdyBleHBsaWNpdGx5IHNwZWNpZmllcyB0aGF0IGl0cyBjYWxsZWUgbXVzdCBiZSBvZiB0eXBlIERlY2tcbiAgICBjcmVhdGVDYXJkUGlja2VyOiBmdW5jdGlvbih0aGlzOiBEZWNrMikge1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgbGV0IHBpY2tlZENhcmQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1Mik7XG4gICAgICAgICAgICBsZXQgcGlja2VkU3VpdCA9IE1hdGguZmxvb3IocGlja2VkQ2FyZCAvIDEzKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwaWNrZWRTdWl0PScscGlja2VkU3VpdCkgIFxuICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwaWNrZWRDYXJkPScscGlja2VkQ2FyZCkgIFxuICAgICAgICAgICAgcmV0dXJuIHtzdWl0OiB0aGlzLnN1aXRzW3BpY2tlZFN1aXRdLCBjYXJkOiBwaWNrZWRDYXJkICUgMTN9O1xuICAgICAgICB9XG4gICAgfVxufVxuXG5sZXQgY2FyZFBpY2tlcjIgPSBkZWNrMi5jcmVhdGVDYXJkUGlja2VyKCk7XG5sZXQgcGlja2VkQ2FyZDIgPSBjYXJkUGlja2VyMigpO1xuXG5jb25zb2xlLmxvZyhcImNhcmQ6IFwiICsgcGlja2VkQ2FyZDIuY2FyZCArIFwiIG9mIFwiICsgcGlja2VkQ2FyZDIuc3VpdCk7XG5cblxuLypcbueOsOWcqFR5cGVTY3JpcHTnn6XpgZNjcmVhdGVDYXJkUGlja2Vy5pyf5pyb5Zyo5p+Q5LiqRGVja+WvueixoeS4iuiwg+eUqOOAgiBcbuS5n+WwseaYr+ivtCB0aGlz5pivRGVja+exu+Wei+eahO+8jOiAjOmdnmFuee+8jOWboOatpC0tbm9JbXBsaWNpdFRoaXPkuI3kvJrmiqXplJnkuobjgIJcblxudGhpc+WPguaVsOWcqOWbnuiwg+WHveaVsOmHjFxu5L2g5Y+v5Lul5Lmf55yL5Yiw6L+H5Zyo5Zue6LCD5Ye95pWw6YeM55qEdGhpc+aKpemUme+8jFxuXG7lvZPkvaDlsIbkuIDkuKrlh73mlbDkvKDpgJLliLDmn5DkuKrlupPlh73mlbDph4znqI3lkI7kvJrooqvosIPnlKjml7bjgIJcbuWboOS4uuW9k+Wbnuiwg+iiq+iwg+eUqOeahOaXtuWAme+8jOWug+S7rOS8muiiq+W9k+aIkOS4gOS4quaZrumAmuWHveaVsOiwg+eUqO+8jCB0aGlz5bCG5Li6dW5kZWZpbmVk44CCXG7nqI3lgZrmlLnliqjvvIzkvaDlsLHlj6/ku6XpgJrov4cgdGhpc+WPguaVsOadpemBv+WFjemUmeivr+OAglxu6aaW5YWI77yM5bqT5Ye95pWw55qE5L2c6ICF6KaB5oyH5a6aIHRoaXPnmoTnsbvlnovvvJpcbiovXG5pbnRlcmZhY2UgVUlFbGVtZW50IHtcbiAgICBhZGRDbGlja0xpc3RlbmVyKG9uY2xpY2s6ICh0aGlzOiB2b2lkLCBlOiBFdmVudCkgPT4gdm9pZCk6IHZvaWQ7XG59XG5cblxuY2xhc3MgSGFuZGxlciB7XG4gICAgaW5mbzogc3RyaW5nO1xuICAgIG9uQ2xpY2tCYWQodGhpczogSGFuZGxlciwgZTogRXZlbnQpIHtcbiAgICAgICAgLy8gb29wcywgdXNlZCB0aGlzIGhlcmUuIHVzaW5nIHRoaXMgY2FsbGJhY2sgd291bGQgY3Jhc2ggYXQgcnVudGltZVxuICAgICAgICAvLyB0aGlzLmluZm8gPSBlLm1lc3NhZ2U7XG4gICAgfVxufVxubGV0IGggPSBuZXcgSGFuZGxlcigpO1xuY29uc3QgdWlFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lkJyk7XG51aUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGgub25DbGlja0JhZCk7IC8vIGVycm9yIVxuXG5cbi8qXG7ph43ovb1cbiAgICBKYXZhU2NyaXB05pys6Lqr5piv5Liq5Yqo5oCB6K+t6KiA44CCIFxuICAgIEphdmFTY3JpcHTph4zlh73mlbDmoLnmja7kvKDlhaXkuI3lkIznmoTlj4LmlbDogIzov5Tlm57kuI3lkIznsbvlnovnmoTmlbDmja7mmK/lvojluLjop4HnmoTjgIJcbiovXG5cbmxldCBzdWl0cyA9IFtcImhlYXJ0c1wiLCBcInNwYWRlc1wiLCBcImNsdWJzXCIsIFwiZGlhbW9uZHNcIl07XG5cbmZ1bmN0aW9uIHBpY2tDYXJkKHg6YW55KTogYW55IHtcbiAgICAvLyBDaGVjayB0byBzZWUgaWYgd2UncmUgd29ya2luZyB3aXRoIGFuIG9iamVjdC9hcnJheVxuICAgIC8vIGlmIHNvLCB0aGV5IGdhdmUgdXMgdGhlIGRlY2sgYW5kIHdlJ2xsIHBpY2sgdGhlIGNhcmRcbiAgICBpZiAodHlwZW9mIHggPT0gXCJvYmplY3RcIikge1xuICAgICAgICBsZXQgcGlja2VkQ2FyZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHgubGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIHBpY2tlZENhcmQ7XG4gICAgfVxuICAgIC8vIE90aGVyd2lzZSBqdXN0IGxldCB0aGVtIHBpY2sgdGhlIGNhcmRcbiAgICBlbHNlIGlmICh0eXBlb2YgeCA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgIGxldCBwaWNrZWRTdWl0ID0gTWF0aC5mbG9vcih4IC8gMTMpO1xuICAgICAgICByZXR1cm4geyBzdWl0OiBzdWl0c1twaWNrZWRTdWl0XSwgY2FyZDogeCAlIDEzIH07XG4gICAgfVxufVxuXG5sZXQgbXlEZWNrID0gW3sgc3VpdDogXCJkaWFtb25kc1wiLCBjYXJkOiAyIH0sIHsgc3VpdDogXCJzcGFkZXNcIiwgY2FyZDogMTAgfSwgeyBzdWl0OiBcImhlYXJ0c1wiLCBjYXJkOiA0IH1dO1xubGV0IHBpY2tlZENhcmQzID0gbXlEZWNrW3BpY2tDYXJkKG15RGVjayldO1xuY29uc29sZS5sb2coXCJjYXJkOiBcIiArIHBpY2tlZENhcmQzLmNhcmQgKyBcIiBvZiBcIiArIHBpY2tlZENhcmQzLnN1aXQpO1xuXG5sZXQgcGlja2VkQ2FyZDQgPSBwaWNrQ2FyZCgxNSk7XG5jb25zb2xlLmxvZyhcImNhcmQ6IFwiICsgcGlja2VkQ2FyZDQuY2FyZCArIFwiIG9mIFwiICsgcGlja2VkQ2FyZDQuc3VpdCk7XG5cbi8qXG5waWNrQ2FyZOaWueazleagueaNruS8oOWFpeWPguaVsOeahOS4jeWQjOS8mui/lOWbnuS4pOenjeS4jeWQjOeahOexu+Wei+OAgiBcbuWmguaenOS8oOWFpeeahOaYr+S7o+ihqOe6uOeJjOeahOWvueixoe+8jOWHveaVsOS9nOeUqOaYr+S7juS4reaKk+S4gOW8oOeJjOOAglxu5aaC5p6c55So5oi35oOz5oqT54mM77yM5oiR5Lus5ZGK6K+J5LuW5oqT5Yiw5LqG5LuA5LmI54mM44CCXG7kvYbmmK/ov5nmgI7kuYjlnKjnsbvlnovns7vnu5/ph4zooajnpLrlkaLjgIJcblxu5pa55rOV5piv5Li65ZCM5LiA5Liq5Ye95pWw5o+Q5L6b5aSa5Liq5Ye95pWw57G75Z6L5a6a5LmJ5p2l6L+b6KGM5Ye95pWw6YeN6L2944CCIFxu57yW6K+R5Zmo5Lya5qC55o2u6L+Z5Liq5YiX6KGo5Y675aSE55CG5Ye95pWw55qE6LCD55So44CCXG7kuIvpnaLmiJHku6zmnaXph43ovb0gcGlja0NhcmTlh73mlbDjgIJcbiovXG5sZXQgc3VpdHMyID0gW1wiaGVhcnRzXCIsIFwic3BhZGVzXCIsIFwiY2x1YnNcIiwgXCJkaWFtb25kc1wiXTtcblxuZnVuY3Rpb24gcGlja0NhcmQyKHg6IHtzdWl0OiBzdHJpbmc7IGNhcmQ6IG51bWJlcjsgfSk6IG51bWJlcntcbiAgICByZXR1cm4gMVxufTtcblxuZnVuY3Rpb24gcGlja0NhcmQzKHg6IG51bWJlcik6dm9pZCB7ICB9O1xuZnVuY3Rpb24gcGlja0NhcmQ0KHg6YW55KTogYW55IHtcbiAgICAvLyBDaGVjayB0byBzZWUgaWYgd2UncmUgd29ya2luZyB3aXRoIGFuIG9iamVjdC9hcnJheVxuICAgIC8vIGlmIHNvLCB0aGV5IGdhdmUgdXMgdGhlIGRlY2sgYW5kIHdlJ2xsIHBpY2sgdGhlIGNhcmRcbiAgICBpZiAodHlwZW9mIHggPT0gXCJvYmplY3RcIikge1xuICAgICAgICBsZXQgcGlja2VkQ2FyZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHgubGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIHBpY2tlZENhcmQ7XG4gICAgfVxuICAgIC8vIE90aGVyd2lzZSBqdXN0IGxldCB0aGVtIHBpY2sgdGhlIGNhcmRcbiAgICBlbHNlIGlmICh0eXBlb2YgeCA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgIGxldCBwaWNrZWRTdWl0ID0gTWF0aC5mbG9vcih4IC8gMTMpO1xuICAgICAgICByZXR1cm4geyBzdWl0OiBzdWl0c1twaWNrZWRTdWl0XSwgY2FyZDogeCAlIDEzIH07XG4gICAgfVxufVxuXG5sZXQgbXlEZWNrNCA9IFt7IHN1aXQ6IFwiZGlhbW9uZHNcIiwgY2FyZDogMiB9LCB7IHN1aXQ6IFwic3BhZGVzXCIsIGNhcmQ6IDEwIH0sIHsgc3VpdDogXCJoZWFydHNcIiwgY2FyZDogNCB9XTtcbmxldCBwaWNrZWRDYXJkNSA9IG15RGVja1twaWNrQ2FyZChteURlY2spXTtcbmFsZXJ0KFwiY2FyZDogXCIgKyBwaWNrZWRDYXJkMS5jYXJkICsgXCIgb2YgXCIgKyBwaWNrZWRDYXJkMS5zdWl0KTtcblxubGV0IHBpY2tlZENhcmQ2ID0gcGlja0NhcmQoMTUpO1xuYWxlcnQoXCJjYXJkOiBcIiArIHBpY2tlZENhcmQyLmNhcmQgKyBcIiBvZiBcIiArIHBpY2tlZENhcmQyLnN1aXQpO1xuXG5cbmV4cG9ydCBkZWZhdWx0e30iXX0=
